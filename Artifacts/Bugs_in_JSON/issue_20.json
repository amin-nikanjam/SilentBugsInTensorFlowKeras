{
  "url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27780",
  "repository_url": "https://api.github.com/repos/tensorflow/tensorflow",
  "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27780/labels{/name}",
  "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27780/comments",
  "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27780/events",
  "html_url": "https://github.com/tensorflow/tensorflow/issues/27780",
  "id": 432434202,
  "node_id": "MDU6SXNzdWU0MzI0MzQyMDI=",
  "number": 27780,
  "title": "DepthwiseConv mixed precision train super slow(Caused byDepthwiseConv2dNativeBackpropFilter )",
  "user": {
    "login": "rootkitchao",
    "id": 40640909,
    "node_id": "MDQ6VXNlcjQwNjQwOTA5",
    "avatar_url": "https://avatars.githubusercontent.com/u/40640909?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rootkitchao",
    "html_url": "https://github.com/rootkitchao",
    "followers_url": "https://api.github.com/users/rootkitchao/followers",
    "following_url": "https://api.github.com/users/rootkitchao/following{/other_user}",
    "gists_url": "https://api.github.com/users/rootkitchao/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rootkitchao/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rootkitchao/subscriptions",
    "organizations_url": "https://api.github.com/users/rootkitchao/orgs",
    "repos_url": "https://api.github.com/users/rootkitchao/repos",
    "events_url": "https://api.github.com/users/rootkitchao/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rootkitchao/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 404586594,
      "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=",
      "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower",
      "name": "stat:awaiting tensorflower",
      "color": "f4b400",
      "default": false,
      "description": "Status  - Awaiting response from tensorflower"
    },
    {
      "id": 473172988,
      "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=",
      "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug",
      "name": "type:bug",
      "color": "159b2e",
      "default": false,
      "description": "Bug"
    },
    {
      "id": 1097546578,
      "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4",
      "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras",
      "name": "comp:keras",
      "color": "0052cc",
      "default": false,
      "description": "Keras related issues"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "reedwm",
    "id": 6510203,
    "node_id": "MDQ6VXNlcjY1MTAyMDM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6510203?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/reedwm",
    "html_url": "https://github.com/reedwm",
    "followers_url": "https://api.github.com/users/reedwm/followers",
    "following_url": "https://api.github.com/users/reedwm/following{/other_user}",
    "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions",
    "organizations_url": "https://api.github.com/users/reedwm/orgs",
    "repos_url": "https://api.github.com/users/reedwm/repos",
    "events_url": "https://api.github.com/users/reedwm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/reedwm/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "reedwm",
      "id": 6510203,
      "node_id": "MDQ6VXNlcjY1MTAyMDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6510203?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/reedwm",
      "html_url": "https://github.com/reedwm",
      "followers_url": "https://api.github.com/users/reedwm/followers",
      "following_url": "https://api.github.com/users/reedwm/following{/other_user}",
      "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions",
      "organizations_url": "https://api.github.com/users/reedwm/orgs",
      "repos_url": "https://api.github.com/users/reedwm/repos",
      "events_url": "https://api.github.com/users/reedwm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/reedwm/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 25,
  "created_at": "2019-04-12T07:52:36Z",
  "updated_at": "2020-08-17T17:23:56Z",
  "closed_at": "2020-08-07T22:41:13Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):MS Windows10 X64 1809 build 17763\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):binary(pip)\r\n- TensorFlow version (use command below):1.13.1\r\n- Python version:3.6\r\n- Bazel version (if compiling from source):N/A\r\n- GCC/Compiler version (if compiling from source):N/A\r\n- CUDA/cuDNN version:10.0/7.5.0.56\r\n- GPU model and memory:NVIDIA Geforce RTX2080TI 11GB\r\n\r\n**Describe the current behavior**\r\nI am trying to port mnasnet's TPU implementation to the GPU.It works fine when using FP32.But when using mixed precision training, the speed is very slow.By using the Profiler to track the training loop, I found that DepthwiseConv2dNativeBackpropFilter consumed too much time.I tried adjusting the loss_scale but it didn't work.I want to know if Depthwise convolution does not support backpropagation at half precision, or there are performance issues.\r\n![image](https://user-images.githubusercontent.com/40640909/56020277-59a4c380-5d39-11e9-9811-3166dfec6978.png)\r\n\r\n**Describe the expected behavior**\r\n\r\n**Code to reproduce the issue**\r\nhttps://github.com/rootkitchao/mnasnet_temp\r\n\r\npython mnasnet_main.py --data_dir=D:\\dataset\\imagenet_tfrecord\\ --model_dir=D:\\tf_project\\mnasnet\\  --model_name=mnasnet-a1 --use_bfloat16=True  --use_keras=False --mode=train --train_batch_size=96 --num_gpus=1 --train_steps=2335456 --steps_per_eval=33363\r\n\r\n(Temporary version.The code does not really use bfloat16, use float16 instead.)\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\nN/A\r\n",
  "closed_by": {
    "login": "reedwm",
    "id": 6510203,
    "node_id": "MDQ6VXNlcjY1MTAyMDM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6510203?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/reedwm",
    "html_url": "https://github.com/reedwm",
    "followers_url": "https://api.github.com/users/reedwm/followers",
    "following_url": "https://api.github.com/users/reedwm/following{/other_user}",
    "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions",
    "organizations_url": "https://api.github.com/users/reedwm/orgs",
    "repos_url": "https://api.github.com/users/reedwm/repos",
    "events_url": "https://api.github.com/users/reedwm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/reedwm/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27780/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27780/timeline",
  "performed_via_github_app": null
}
