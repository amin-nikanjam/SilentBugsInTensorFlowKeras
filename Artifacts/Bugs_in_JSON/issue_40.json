{
  "url": "https://api.github.com/repos/tensorflow/tensorflow/issues/46329",
  "repository_url": "https://api.github.com/repos/tensorflow/tensorflow",
  "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/46329/labels{/name}",
  "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/46329/comments",
  "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/46329/events",
  "html_url": "https://github.com/tensorflow/tensorflow/issues/46329",
  "id": 783065994,
  "node_id": "MDU6SXNzdWU3ODMwNjU5OTQ=",
  "number": 46329,
  "title": "model with \"tf.keras.layers.Embedding\" and \"trainable=False\" will be loaded as \"trainable=True\" after saving",
  "user": {
    "login": "xqr-g",
    "id": 66964675,
    "node_id": "MDQ6VXNlcjY2OTY0Njc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/66964675?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/xqr-g",
    "html_url": "https://github.com/xqr-g",
    "followers_url": "https://api.github.com/users/xqr-g/followers",
    "following_url": "https://api.github.com/users/xqr-g/following{/other_user}",
    "gists_url": "https://api.github.com/users/xqr-g/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/xqr-g/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/xqr-g/subscriptions",
    "organizations_url": "https://api.github.com/users/xqr-g/orgs",
    "repos_url": "https://api.github.com/users/xqr-g/repos",
    "events_url": "https://api.github.com/users/xqr-g/events{/privacy}",
    "received_events_url": "https://api.github.com/users/xqr-g/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 404586594,
      "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=",
      "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower",
      "name": "stat:awaiting tensorflower",
      "color": "f4b400",
      "default": false,
      "description": "Status  - Awaiting response from tensorflower"
    },
    {
      "id": 473172988,
      "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=",
      "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug",
      "name": "type:bug",
      "color": "159b2e",
      "default": false,
      "description": "Bug"
    },
    {
      "id": 1097546578,
      "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4",
      "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras",
      "name": "comp:keras",
      "color": "0052cc",
      "default": false,
      "description": "Keras related issues"
    },
    {
      "id": 2498949452,
      "node_id": "MDU6TGFiZWwyNDk4OTQ5NDUy",
      "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.5",
      "name": "TF 2.5",
      "color": "5319e7",
      "default": false,
      "description": "Issues related to TF 2.5"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "jvishnuvardhan",
    "id": 46058173,
    "node_id": "MDQ6VXNlcjQ2MDU4MTcz",
    "avatar_url": "https://avatars.githubusercontent.com/u/46058173?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jvishnuvardhan",
    "html_url": "https://github.com/jvishnuvardhan",
    "followers_url": "https://api.github.com/users/jvishnuvardhan/followers",
    "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}",
    "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions",
    "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs",
    "repos_url": "https://api.github.com/users/jvishnuvardhan/repos",
    "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "jvishnuvardhan",
      "id": 46058173,
      "node_id": "MDQ6VXNlcjQ2MDU4MTcz",
      "avatar_url": "https://avatars.githubusercontent.com/u/46058173?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jvishnuvardhan",
      "html_url": "https://github.com/jvishnuvardhan",
      "followers_url": "https://api.github.com/users/jvishnuvardhan/followers",
      "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}",
      "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions",
      "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs",
      "repos_url": "https://api.github.com/users/jvishnuvardhan/repos",
      "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-01-11T05:05:19Z",
  "updated_at": "2021-01-14T00:26:57Z",
  "closed_at": "2021-01-14T00:26:55Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### System information\r\n\r\n-   **Have I written custom code (as opposed to using a stock example script\r\n    provided in TensorFlow)**: No\r\n-   **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 16.04\r\n-   **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue\r\n    happens on a mobile device**:\r\n-   **TensorFlow installed from (source or binary)**: source\r\n-   **TensorFlow version (use command below)**: 2.5.0\r\n-   **Python version**: 3.6\r\n-   **Bazel version (if compiling from source)**:\r\n-   **GCC/Compiler version (if compiling from source)**:\r\n-   **CUDA/cuDNN version**:\r\n-   **GPU model and memory**:\r\n-   **Exact command to reproduce**:\r\n\r\n### Describe the problem\r\nAfter saving a model with tf.keras.layers.Embedding as a layer and set trainable=False and loading the model, the layer has \"trainable=True\" in the get_config().\r\n\r\n### Source code / logs\r\n```\r\n# Code is from https://www.tensorflow.org/api_docs/python/tf/keras/layers/Embedding\r\nmodel = tf.keras.Sequential()\r\nmodel.add(tf.keras.layers.Embedding(1000, 64, input_length=10, trainable=False))\r\n\r\ninput_array = np.random.randint(1000, size=(32, 10))\r\nmodel.compile('rmsprop', 'mse')\r\n\r\nmodel.summary()\r\nmodel.save('some_path')\r\nnew_model = tf.keras.models.load_model('some_path')\r\nnew_model.summary()\r\n```\r\n\r\nmodel has 0 trainable parameters but new_model has 6400 trainable parameters.\r\nmodel summary:\r\n```\r\n_________________________________________________________________\r\nLayer (type)                 Output Shape              Param #   \r\n=================================================================\r\nembedding_1 (Embedding)      (None, 10, 64)            64000     \r\n=================================================================\r\nTotal params: 64,000\r\nTrainable params: 0\r\nNon-trainable params: 64,000\r\n_________________________________________________________________\r\n```\r\nnew_model summary:\r\n```\r\n_________________________________________________________________\r\nLayer (type)                 Output Shape              Param #   \r\n=================================================================\r\nembedding (Embedding)        (None, 10, 64)            64000     \r\n=================================================================\r\nTotal params: 64,000\r\nTrainable params: 64,000\r\nNon-trainable params: 0\r\n_________________________________________________________________\r\n```\r\n\r\n",
  "closed_by": {
    "login": "ccrusius",
    "id": 1573848,
    "node_id": "MDQ6VXNlcjE1NzM4NDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1573848?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ccrusius",
    "html_url": "https://github.com/ccrusius",
    "followers_url": "https://api.github.com/users/ccrusius/followers",
    "following_url": "https://api.github.com/users/ccrusius/following{/other_user}",
    "gists_url": "https://api.github.com/users/ccrusius/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ccrusius/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ccrusius/subscriptions",
    "organizations_url": "https://api.github.com/users/ccrusius/orgs",
    "repos_url": "https://api.github.com/users/ccrusius/repos",
    "events_url": "https://api.github.com/users/ccrusius/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ccrusius/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/tensorflow/tensorflow/issues/46329/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/46329/timeline",
  "performed_via_github_app": null
}
