{
  "url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30040",
  "repository_url": "https://api.github.com/repos/tensorflow/tensorflow",
  "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30040/labels{/name}",
  "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30040/comments",
  "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30040/events",
  "html_url": "https://github.com/tensorflow/tensorflow/issues/30040",
  "id": 459461014,
  "node_id": "MDU6SXNzdWU0NTk0NjEwMTQ=",
  "number": 30040,
  "title": "Dimensions check in BinaryCrossEntropy",
  "user": {
    "login": "AakashKumarNain",
    "id": 11736571,
    "node_id": "MDQ6VXNlcjExNzM2NTcx",
    "avatar_url": "https://avatars.githubusercontent.com/u/11736571?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AakashKumarNain",
    "html_url": "https://github.com/AakashKumarNain",
    "followers_url": "https://api.github.com/users/AakashKumarNain/followers",
    "following_url": "https://api.github.com/users/AakashKumarNain/following{/other_user}",
    "gists_url": "https://api.github.com/users/AakashKumarNain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AakashKumarNain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AakashKumarNain/subscriptions",
    "organizations_url": "https://api.github.com/users/AakashKumarNain/orgs",
    "repos_url": "https://api.github.com/users/AakashKumarNain/repos",
    "events_url": "https://api.github.com/users/AakashKumarNain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AakashKumarNain/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 473172988,
      "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=",
      "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug",
      "name": "type:bug",
      "color": "159b2e",
      "default": false,
      "description": "Bug"
    },
    {
      "id": 1097546578,
      "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4",
      "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras",
      "name": "comp:keras",
      "color": "0052cc",
      "default": false,
      "description": "Keras related issues"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "gadagashwini",
    "id": 48476109,
    "node_id": "MDQ6VXNlcjQ4NDc2MTA5",
    "avatar_url": "https://avatars.githubusercontent.com/u/48476109?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gadagashwini",
    "html_url": "https://github.com/gadagashwini",
    "followers_url": "https://api.github.com/users/gadagashwini/followers",
    "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}",
    "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions",
    "organizations_url": "https://api.github.com/users/gadagashwini/orgs",
    "repos_url": "https://api.github.com/users/gadagashwini/repos",
    "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gadagashwini/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "gadagashwini",
      "id": 48476109,
      "node_id": "MDQ6VXNlcjQ4NDc2MTA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/48476109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gadagashwini",
      "html_url": "https://github.com/gadagashwini",
      "followers_url": "https://api.github.com/users/gadagashwini/followers",
      "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}",
      "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions",
      "organizations_url": "https://api.github.com/users/gadagashwini/orgs",
      "repos_url": "https://api.github.com/users/gadagashwini/repos",
      "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gadagashwini/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2019-06-22T10:30:26Z",
  "updated_at": "2019-07-17T18:12:07Z",
  "closed_at": "2019-07-17T18:12:05Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: NA\r\n- TensorFlow installed from (source or binary):Binary\r\n- TensorFlow version (use command below):2.0.0-beta1\r\n- Python version:3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**Describe the current behavior**\r\nSuppose we build a model for binary classification problem and we want to use `BinaryCrossEntropy` loss provided in `tf.keras.losses`. Here is an example:\r\n```python\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\ny_true = np.array([[1.], [1.], [1.], [0.], [1.], [0.], [0.], [1.], [1.], [0.]]).astype(np.float32)\r\ny_pred = np.array([[0.], [0.], [0.], [1.], [1.], [0.], [0.], [1.], [0.], [1.]]).astype(np.float32)\r\n\r\nprint(y_true.shape, y_pred.shape) # prints (10, 1) (10, 1)\r\n\r\n# loss function\r\nbce = tf.keras.losses.BinaryCrossentropy()\r\n\r\n# Case1:\r\nprint(bce(y_true, y_pred).numpy())  # prints 9.23662 correctly\r\n\r\n# Case2:\r\nprint(bce(np.squeeze(y_true), y_pred).numpy()) # prints 8.006299\r\n```\r\n\r\n**Describe the expected behavior**\r\nWhen the `dimensions` of `y_true` and `y_pred` are different, in that case the loss function should raise an error for `dimension` mismatch or the model will fail **silently** and no one would be ab;e to debug it until unless they are aware of this behavior \r\n\r\n**Code to reproduce the issue**\r\nCheck above \r\n\r\n",
  "closed_by": {
    "login": "tensorflow-copybara",
    "id": 33434372,
    "node_id": "MDQ6VXNlcjMzNDM0Mzcy",
    "avatar_url": "https://avatars.githubusercontent.com/u/33434372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tensorflow-copybara",
    "html_url": "https://github.com/tensorflow-copybara",
    "followers_url": "https://api.github.com/users/tensorflow-copybara/followers",
    "following_url": "https://api.github.com/users/tensorflow-copybara/following{/other_user}",
    "gists_url": "https://api.github.com/users/tensorflow-copybara/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tensorflow-copybara/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tensorflow-copybara/subscriptions",
    "organizations_url": "https://api.github.com/users/tensorflow-copybara/orgs",
    "repos_url": "https://api.github.com/users/tensorflow-copybara/repos",
    "events_url": "https://api.github.com/users/tensorflow-copybara/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tensorflow-copybara/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30040/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30040/timeline",
  "performed_via_github_app": null
}
