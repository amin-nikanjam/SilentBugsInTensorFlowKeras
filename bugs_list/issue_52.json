{
  "url": "https://api.github.com/repos/tensorflow/tensorflow/issues/29881",
  "repository_url": "https://api.github.com/repos/tensorflow/tensorflow",
  "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/29881/labels{/name}",
  "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/29881/comments",
  "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/29881/events",
  "html_url": "https://github.com/tensorflow/tensorflow/issues/29881",
  "id": 457052337,
  "node_id": "MDU6SXNzdWU0NTcwNTIzMzc=",
  "number": 29881,
  "title": "The call method of DenseFeatures and SequenceFeatures use deprecated attribute _num_buckets",
  "user": {
    "login": "durandg12",
    "id": 45902885,
    "node_id": "MDQ6VXNlcjQ1OTAyODg1",
    "avatar_url": "https://avatars.githubusercontent.com/u/45902885?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/durandg12",
    "html_url": "https://github.com/durandg12",
    "followers_url": "https://api.github.com/users/durandg12/followers",
    "following_url": "https://api.github.com/users/durandg12/following{/other_user}",
    "gists_url": "https://api.github.com/users/durandg12/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/durandg12/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/durandg12/subscriptions",
    "organizations_url": "https://api.github.com/users/durandg12/orgs",
    "repos_url": "https://api.github.com/users/durandg12/repos",
    "events_url": "https://api.github.com/users/durandg12/events{/privacy}",
    "received_events_url": "https://api.github.com/users/durandg12/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 404586594,
      "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=",
      "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower",
      "name": "stat:awaiting tensorflower",
      "color": "f4b400",
      "default": false,
      "description": "Status  - Awaiting response from tensorflower"
    },
    {
      "id": 473172988,
      "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=",
      "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug",
      "name": "type:bug",
      "color": "159b2e",
      "default": false,
      "description": "Bug"
    },
    {
      "id": 1097546578,
      "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4",
      "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras",
      "name": "comp:keras",
      "color": "0052cc",
      "default": false,
      "description": "Keras related issues"
    },
    {
      "id": 1160540362,
      "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy",
      "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0",
      "name": "TF 2.0",
      "color": "e79b38",
      "default": false,
      "description": "Issues relating to TensorFlow 2.0"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 9,
  "created_at": "2019-06-17T17:27:01Z",
  "updated_at": "2020-04-29T23:16:46Z",
  "closed_at": "2019-06-23T01:30:39Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): no\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS 10.13.6\r\n- TensorFlow installed from (source or binary): from pip install\r\n- TensorFlow version (use command below): v1.12.1-3259-gf59745a381 2.0.0-beta0\r\n- Python version: v3.6.7:6ec5cf24b7, Oct 20 2018, 03:02:14\r\n\r\n**Describe the current behavior**\r\n\r\nBy simply calling the `call` method of `DenseFeatures` and `SequenceFeatures` defined with `categorical_column_with_identity` and `sequence_categorical_column_with_identity` feature columns (along with `embedding_column`), we get warnings that the deprecated attributes `_num_buckets` are used (instead of the non-deprecated `num_buckets` I guess).\r\n\r\nAlso note, on the code example below, that a third warning about a deprecated method, `add_dispatch_support.<locals>.wrapper` arises. I do not understand it but there are instructions for updating given in the warning, see the code below.\r\n\r\n**Describe the expected behavior**\r\n\r\nI think that we should not get warnings about deprecated objects when we are not calling any deprecated method, attribute, etc. I think that somewhere in the code of the `call` method of `DenseFeatures` and `SequenceFeatures` there is a use of `_num_buckets` that should be replaced by `num_buckets`. Following the updating instructions about the third warning may be enough to get rid of it.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\nimport numpy as np\r\nimport tensorflow as tf\r\nfrom tensorflow.feature_column import categorical_column_with_identity, embedding_column, \\\r\n                                            sequence_categorical_column_with_identity\r\nfrom tensorflow.keras.layers import DenseFeatures\r\nfrom tensorflow.keras.experimental import SequenceFeatures\r\n\r\n#print(tf.version.GIT_VERSION, tf.version.VERSION)\r\n\r\nnb_features = 10\r\nemb_dim = 3\r\n\r\nfc = categorical_column_with_identity('feature1', nb_features)\r\nemb_fc = embedding_column(fc, emb_dim)\r\nlayer = DenseFeatures(emb_fc)\r\n\r\nseq_fc = sequence_categorical_column_with_identity('feature2', nb_features)\r\nemb_seq_fc = embedding_column(seq_fc, emb_dim)\r\nseq_layer = SequenceFeatures(emb_seq_fc)\r\n\r\ndata1 = np.array(range(nb_features))\r\nbatch_size, sequence_length = 2, 5\r\nraw_data2 = np.array(range(nb_features))\r\ndata2 = np.reshape(raw_data2, (batch_size, sequence_length))\r\n\r\ndict_data = {'feature1': data1, 'feature2': data2}\r\nprint(layer(dict_data))\r\nprint(seq_layer(dict_data))\r\n```\r\nproduces the following three warnings:\r\n\r\n```\r\nWARNING: Logging before flag parsing goes to stderr.\r\nW0617 19:19:42.823884 140735678825344 deprecation.py:323] From /Users/myusername/Documents/tf2beta/lib/python3.6/site-packages/tensorflow/python/feature_column/feature_column_v2.py:3040: IdentityCategoricalColumn._num_buckets (from tensorflow.python.feature_column.feature_column_v2) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nThe old _FeatureColumn APIs are being deprecated. Please use the new FeatureColumn APIs instead.\r\nW0617 19:19:42.827694 140735678825344 deprecation.py:323] From /Users/myusername/Documents/tf2beta/lib/python3.6/site-packages/tensorflow/python/feature_column/feature_column_v2.py:2655: add_dispatch_support.<locals>.wrapper (from tensorflow.python.ops.array_ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse tf.where in 2.0, which has the same broadcast rule as np.where\r\nW0617 19:19:42.833320 140735678825344 deprecation.py:323] From /Users/myusername/Documents/tf2beta/lib/python3.6/site-packages/tensorflow/python/feature_column/feature_column_v2.py:3040: SequenceCategoricalColumn._num_buckets (from tensorflow.python.feature_column.feature_column_v2) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nThe old _FeatureColumn APIs are being deprecated. Please use the new FeatureColumn APIs instead.\r\n```",
  "closed_by": {
    "login": "tensorflow-copybara",
    "id": 33434372,
    "node_id": "MDQ6VXNlcjMzNDM0Mzcy",
    "avatar_url": "https://avatars.githubusercontent.com/u/33434372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tensorflow-copybara",
    "html_url": "https://github.com/tensorflow-copybara",
    "followers_url": "https://api.github.com/users/tensorflow-copybara/followers",
    "following_url": "https://api.github.com/users/tensorflow-copybara/following{/other_user}",
    "gists_url": "https://api.github.com/users/tensorflow-copybara/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tensorflow-copybara/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tensorflow-copybara/subscriptions",
    "organizations_url": "https://api.github.com/users/tensorflow-copybara/orgs",
    "repos_url": "https://api.github.com/users/tensorflow-copybara/repos",
    "events_url": "https://api.github.com/users/tensorflow-copybara/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tensorflow-copybara/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/tensorflow/tensorflow/issues/29881/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/29881/timeline",
  "performed_via_github_app": null
}
